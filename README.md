# 临时投票网页服务

一个使用 Go 语言开发的简单投票系统，支持创建投票、投票和查看结果。

## 功能特点

- 无需登录，快速创建投票
- 支持单选和多选投票
- **多选投票支持设置选项数量限制**
  - 可设置最少选择数量（至少选几个）
  - 可设置最多选择数量（最多选几个）
  - 可同时设置最少和最多数量（必须选几个到几个之间）
- 自动生成二维码，方便分享投票链接
- 实时显示投票结果和统计图表
- 使用 localStorage 防止重复投票
- 简洁美观的界面设计

## 环境要求

- Go 1.16 或更高版本

## 安装依赖

```bash
go mod tidy
```

或手动安装：

```bash
go get github.com/google/uuid
go get github.com/skip2/go-qrcode
```

## 运行服务器

```bash
go run main.go
```

服务器将启动在 http://localhost:8888

## 使用说明

### 1. 创建投票

访问 http://localhost:8888/create

- 输入投票标题
- 添加投票选项（至少2个，可动态添加/删除）
- 选择是否允许多选
- **如果是多选，可以设置选项数量限制：**
  - 最少选择数量：0 表示无限制，设置为 N 表示至少要选 N 个
  - 最多选择数量：0 表示无限制，设置为 N 表示最多只能选 N 个
  - 示例：最少3，最多5 = 必须选择3到5个选项之间
- 点击"创建投票"按钮

### 2. 分享投票

创建投票后，页面会显示：
- 投票二维码（扫描即可访问）
- 投票链接（可以复制分享）

### 3. 投票

访问投票页面：
- 选择一个或多个选项（取决于投票类型）
- 点击"提交投票"按钮
- 每个浏览器只能投票一次（通过 localStorage 记录）

### 4. 查看结果

- 在投票页面点击"查看结果"按钮
- 或直接访问 `/api/results/{投票ID}`
- 结果页面显示：
  - 总投票数
  - 每个选项的票数和百分比
  - 可视化的投票结果条形图

## 技术架构

- **后端**: Go 标准库 + net/http
- **数据存储**: 内存存储（重启服务器数据会丢失）
- **二维码**: github.com/skip2/go-qrcode
- **UUID**: github.com/google/uuid
- **前端**: 原生 HTML/CSS/JavaScript

## API 接口

### POST /api/create-poll
创建新投票

请求体：
```json
{
  "title": "投票标题",
  "options": ["选项1", "选项2"],
  "multi_select": false
}
```

### POST /api/vote
提交投票

请求体：
```json
{
  "poll_id": "投票ID",
  "options": ["选项1"]
}
```

### GET /api/results/{poll_id}
查看投票结果

## 注意事项

1. 数据存储在内存中，服务器重启后所有投票数据将丢失
2. 防重复投票使用浏览器 localStorage，清除浏览器数据后可再次投票
3. 二维码中的 URL 是 localhost:8888，仅适用于本地测试
4. 如需在局域网使用，需要修改代码中的 URL 为服务器的实际 IP 地址

## 生产环境建议

如果要在生产环境使用，建议：
- 添加数据持久化（数据库或文件存储）
- 使用环境变量配置端口和域名
- 添加投票时间限制功能
- 实现更强的防刷票机制（IP 限制、验证码等）
- 添加投票管理后台
- 使用 HTTPS 协议

## 许可证

MIT License
